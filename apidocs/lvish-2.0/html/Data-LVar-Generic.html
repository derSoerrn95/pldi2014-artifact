<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.LVar.Generic</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-LVar-Generic.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lvish-2.0: Parallel scheduler, LVar data structures, and infrastructure to build more.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr></table><p class="caption">Data.LVar.Generic</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Classes containing the generic interfaces
</a></li><li><a href="#g:2">Supporting types and utilities
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A generic interface providing operations that work on <em>all</em> LVars.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Foldable.html#t:Foldable">Foldable</a> (f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a>) =&gt; <a href="#t:LVarData1">LVarData1</a> f  <span class="keyword">where</span><ul class="subs"><li><a href="#v:addHandler">addHandler</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Control-LVish.html#t:HandlerPool">HandlerPool</a> -&gt; f s elt -&gt; (elt -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()) -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()</li><li><a href="#v:freeze">freeze</a> :: HasFreeze e =&gt; f s a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a)</li><li><a href="#v:sortFrzn">sortFrzn</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#t:Ord">Ord</a> a =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a -&gt; <a href="Data-LVar-Generic.html#t:AFoldable">AFoldable</a> a</li></ul></li><li class="src short"><span class="keyword">class</span>  <a href="#t:LVarWBottom">LVarWBottom</a> f  <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:LVContents">LVContents</a> f a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/GHC-Exts.html#t:Constraint">Constraint</a></li><li><a href="#v:newBottom">newBottom</a> :: <a href="Data-LVar-Generic.html#t:LVContents">LVContents</a> f a =&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f s a)</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; <a href="#t:OrderedLVarData1">OrderedLVarData1</a> f  <span class="keyword">where</span><ul class="subs"><li><a href="#v:snapFreeze">snapFreeze</a> :: HasFreeze e =&gt; f s a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a> a)</li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:AFoldable">AFoldable</a> a = <span class="keyword">forall</span> f2 . <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Foldable.html#t:Foldable">Foldable</a> f2 =&gt; <a href="#v:AFoldable">AFoldable</a> (f2 a)</li><li class="src short"><a href="#v:castFrzn">castFrzn</a> :: <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a> a -&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a</li><li class="src short"><a href="#v:forFrzn">forFrzn</a> :: <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a -&gt; (a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()) -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()</li></ul></div><div id="interface"><h1 id="g:1">Classes containing the generic interfaces
</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Foldable.html#t:Foldable">Foldable</a> (f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a>) =&gt; <a name="t:LVarData1" class="def">LVarData1</a> f  <span class="keyword">where</span></p><div class="doc"><p>A class representing monotonic data structures that take <em>one</em> type
 parameter, as well as an <code>s</code> parameter for session safety.
</p><p>LVars that fall into this class are typically collection types.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:addHandler" class="def">addHandler</a> ::  <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Control-LVish.html#t:HandlerPool">HandlerPool</a> -&gt; f s elt -&gt; (elt -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()) -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()</p><div class="doc"><p>Add a handler function which is called whenever an element is
 added to the LVar.
</p></div><p class="src"><a name="v:freeze" class="def">freeze</a> :: HasFreeze e =&gt; f s a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a)</p><div class="doc"><p>An <em>O(1)</em> operation that atomically switches the LVar into a
 frozen state.  Any threads waiting on the freeze are woken.
</p><p>The contents of a frozen LVar are fully observable:
 e.g., a whole set instead of one element, or the full/empty
 information for an IVar, instead of just the payload.
</p><p>However, note that <code><a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a></code> LVars cannot be folded, because they may have
 nondeterministic ordering after being frozen.  See <code>sortFreeze</code>.
</p></div><p class="src"><a name="v:sortFrzn" class="def">sortFrzn</a> :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Ord.html#t:Ord">Ord</a> a =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a -&gt; <a href="Data-LVar-Generic.html#t:AFoldable">AFoldable</a> a</p><div class="doc"><p>Perform a freeze followed by a <em>sort</em> operation which guarantees
 that the elements produced will be produced in a deterministic order.
 The result is fully accessible to the user (<code>Foldable</code>).
</p></div></div><div class="subs instances"><p id="control.i:LVarData1" class="caption collapser" onclick="toggleSection('i:LVarData1')">Instances</p><div id="section.i:LVarData1" class="show"><table><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> <a href="Data-LVar-IVar.html#t:IVar">IVar</a></td><td class="doc"><p>An <code><a href="Data-LVar-IVar.html#t:IVar">IVar</a></code> can be treated as a generic container LVar which happens to
 contain at most one value!  Note, however, that the polymorphic operations are
 less useful than the monomorphic ones exposed by this module.
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> <a href="Data-LVar-IStructure.html#t:IStructure">IStructure</a></td><td class="doc"><p>An <code><a href="Data-LVar-IStructure.html#t:IStructure">IStructure</a></code> can be treated as a generic container LVar.  However, the
 polymorphic operations are less useful than the monomorphic ones exposed by this
 module (e.g., <code>forEachHP</code> vs. <code>addHandler</code>).
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> <a href="Data-LVar-PureSet.html#t:ISet">ISet</a></td><td class="doc"><p>An <code><a href="Data-LVar-PureSet.html#t:ISet">ISet</a></code> can be treated as a generic container LVar.  However, the polymorphic
 operations are less useful than the monomorphic ones exposed by this module.
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> <a href="Data-LVar-SLSet.html#t:ISet">ISet</a></td><td class="doc"><p>An <code><a href="Data-LVar-SLSet.html#t:ISet">ISet</a></code> can be treated as a generic container LVar.
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> (<a href="Data-LVar-PureMap-Unsafe.html#t:IMap">IMap</a> k)</td><td class="doc"><p>An <code><a href="Data-LVar-PureMap-Unsafe.html#t:IMap">IMap</a></code> can be treated as a generic container LVar.  However, the polymorphic
 operations are less useful than the monomorphic ones exposed by this module.
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> (<a href="Data-LVar-SLMap.html#t:IMap">IMap</a> k)</td><td class="doc"><p>An <code><a href="Data-LVar-SLMap.html#t:IMap">IMap</a></code> can be treated as a generic container LVar.  However, the polymorphic
 operations are less useful than the monomorphic ones exposed by this module.
</p></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:LVarWBottom" class="def">LVarWBottom</a> f  <span class="keyword">where</span></p><div class="doc"><p>A class enabling generic creation of new LVars.
</p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a name="t:LVContents" class="def">LVContents</a> f a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/GHC-Exts.html#t:Constraint">Constraint</a></p><div class="doc"><p>Requirements for contents types of this LVar.
</p></div></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:newBottom" class="def">newBottom</a> :: <a href="Data-LVar-Generic.html#t:LVContents">LVContents</a> f a =&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f s a)</p></div><div class="subs instances"><p id="control.i:LVarWBottom" class="caption collapser" onclick="toggleSection('i:LVarWBottom')">Instances</p><div id="section.i:LVarWBottom" class="show"><table><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarWBottom">LVarWBottom</a> <a href="Data-LVar-IVar.html#t:IVar">IVar</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:LVarWBottom">LVarWBottom</a> <a href="Data-LVar-SLSet.html#t:ISet">ISet</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; <a name="t:OrderedLVarData1" class="def">OrderedLVarData1</a> f  <span class="keyword">where</span></p><div class="doc"><p>Some LVar datatypes are stored in an <em>internally</em> ordered way so
 that it is then possible to take <em>O(1)</em> frozen snapshots and consume them
 inexpensively in a deterministic order.
</p><p>LVars with this additional property provide this class as well as <code><a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a></code>.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:snapFreeze" class="def">snapFreeze</a> :: HasFreeze e =&gt; f s a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s (f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a> a)</p><div class="doc"><p>Don't just freeze the LVar, but make the full contents
 completely available and <code>Foldable</code>.  Guaranteed <em>O(1)</em>.
</p></div></div><div class="subs instances"><p id="control.i:OrderedLVarData1" class="caption collapser" onclick="toggleSection('i:OrderedLVarData1')">Instances</p><div id="section.i:OrderedLVarData1" class="show"><table><tr><td class="src"><a href="Data-LVar-Generic.html#t:OrderedLVarData1">OrderedLVarData1</a> <a href="Data-LVar-IStructure.html#t:IStructure">IStructure</a></td><td class="doc"><p>The <code><a href="Data-LVar-IStructure.html#t:IStructure">IStructure</a></code>s in this module also have the special property that they
 support a freeze operation which immediately yields a <code>Foldable</code> container
 without any sorting (see <code><a href="Data-LVar-Generic.html#v:snapFreeze">snapFreeze</a></code>).
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:OrderedLVarData1">OrderedLVarData1</a> <a href="Data-LVar-PureSet.html#t:ISet">ISet</a></td><td class="doc"><p>The <code><a href="Data-LVar-PureSet.html#t:ISet">ISet</a></code>s in this module also have the special property that they support an
 <em>O(1)</em> freeze operation which immediately yields a <code>Foldable</code> container
 (<code><a href="Data-LVar-Generic.html#v:snapFreeze">snapFreeze</a></code>).
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:OrderedLVarData1">OrderedLVarData1</a> <a href="Data-LVar-SLSet.html#t:ISet">ISet</a></td><td class="doc"><p>The <code><a href="Data-LVar-SLSet.html#t:ISet">ISet</a></code>s in this module also have the special property that they support an
 <em>O(1)</em> freeze operation which immediately yields a <code>Foldable</code> container
 (<code><a href="Data-LVar-Generic.html#v:snapFreeze">snapFreeze</a></code>).
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:OrderedLVarData1">OrderedLVarData1</a> (<a href="Data-LVar-PureMap-Unsafe.html#t:IMap">IMap</a> k)</td><td class="doc"><p>The <code><a href="Data-LVar-PureMap-Unsafe.html#t:IMap">IMap</a></code>s in this module also have the special property that they support an
 <em>O(1)</em> freeze operation which immediately yields a <code>Foldable</code> container
 (<code><a href="Data-LVar-Generic.html#v:snapFreeze">snapFreeze</a></code>).
</p></td></tr><tr><td class="src"><a href="Data-LVar-Generic.html#t:OrderedLVarData1">OrderedLVarData1</a> (<a href="Data-LVar-SLMap.html#t:IMap">IMap</a> k)</td><td class="doc"><p>The <code><a href="Data-LVar-SLMap.html#t:IMap">IMap</a></code>s in this module also have the special property that they support an
 <em>O(1)</em> freeze operation which immediately yields a <code>Foldable</code> container
 (<code><a href="Data-LVar-Generic.html#v:snapFreeze">snapFreeze</a></code>).
</p></td></tr></table></div></div></div><h1 id="g:2">Supporting types and utilities
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:AFoldable" class="def">AFoldable</a> a </p><div class="doc"><p>Carries a <code>Foldable</code> type, but you don't get to know which one.
   The purpose of this type is that <code>sortFreeze</code> should not have
   to impose a particular memory representation.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><span class="keyword">forall</span> f2 . <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Foldable.html#t:Foldable">Foldable</a> f2 =&gt; <a name="v:AFoldable" class="def">AFoldable</a> (f2 a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:AFoldable" class="caption collapser" onclick="toggleSection('i:AFoldable')">Instances</p><div id="section.i:AFoldable" class="show"><table><tr><td class="src"><a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> a =&gt; <a href="file:///Library/Frameworks/GHC.framework/Versions/7.6.3-x86_64/usr/share/doc/ghc/html/libraries/base-4.6.0.1/Text-Show.html#t:Show">Show</a> (<a href="Data-LVar-Generic.html#t:AFoldable">AFoldable</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:castFrzn" class="def">castFrzn</a> :: <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a> a -&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a</p><div class="doc"><p><code><a href="Control-LVish-DeepFrz-Internal.html#t:Trvrsbl">Trvrsbl</a></code> is a stronger property than <code><a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a></code>, so it is always safe to &quot;upcast&quot; to
 the weaker version.
</p></div></div><div class="top"><p class="src"><a name="v:forFrzn" class="def">forFrzn</a> :: <a href="Data-LVar-Generic.html#t:LVarData1">LVarData1</a> f =&gt; f <a href="Control-LVish-DeepFrz-Internal.html#t:Frzn">Frzn</a> a -&gt; (a -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()) -&gt; <a href="Control-LVish-Internal.html#t:Par">Par</a> e s ()</p><div class="doc"><p>LVish <code><a href="Control-LVish-Internal.html#t:Par">Par</a></code> actions must commute, therefore one safe way to consume a frozen (but
 unordered) LVar, even in another <code><a href="Control-LVish.html#v:runPar">runPar</a></code> session, is to run a <code><a href="Control-LVish-Internal.html#t:Par">Par</a></code> computation for
 each element.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>